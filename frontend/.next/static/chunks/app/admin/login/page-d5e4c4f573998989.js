(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2116],{6002:(e,t,r)=>{Promise.resolve().then(r.bind(r,4991))},6046:(e,t,r)=>{"use strict";var a=r(6658);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},4991:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(5155),s=r(2115),o=r(6046),n=r(5565),l=r(8173),i=r.n(l),d=r(4144);function c(){let e=(0,o.useRouter)(),[t,r]=(0,s.useState)({username:"",password:""}),[l,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{d.y.getStoredAdmin()&&e.push("/admin")},[e]);let h=e=>{let{name:t,value:a}=e.target;r(e=>({...e,[t]:a}))},p=async r=>{r.preventDefault(),m(!0),c("");try{await d.y.login(t),e.push("/admin")}catch(e){var a,s;console.error("Login failed:",e),c((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Giriş yapılırken bir hata oluştu")}finally{m(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.default,{src:"/logo.png",alt:"Logo",width:150,height:150,className:"mx-auto"}),(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Admin Paneli"}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"L\xfctfen giriş yapın"}),(0,a.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Hesabınız yok mu?"," ",(0,a.jsx)(i(),{href:"/admin/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Kayıt olun"})]})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:p,children:[l&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:l}),(0,a.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"sr-only",children:"Kullanıcı Adı"}),(0,a.jsx)("input",{id:"username",name:"username",type:"text",required:!0,value:t.username,onChange:h,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Kullanıcı Adı"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Şifre"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:t.password,onChange:h,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Şifre"})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(u?"opacity-50 cursor-not-allowed":""),children:u?(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Giriş Yap"})})]})]})})}},172:(e,t,r)=>{"use strict";r.d(t,{C:()=>s,H:()=>a});let a="http://localhost:5001/api",s="http://localhost:5001"},2649:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2651),s=r(172);let o=a.A.create({baseURL:s.H,timeout:1e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>(console.error("Request interceptor error:",e),Promise.reject(e))),o.interceptors.response.use(e=>(console.log("API Success:",e.config.url,e.status),e),e=>{var t,r,s;return a.A.isCancel(e)?(console.log("Request cancelled:",e.message),Promise.reject(Error("Request was cancelled"))):"ERR_NETWORK"===e.code?(console.error("Network error - backend server may be down"),Promise.reject(Error("Network error - please check if the server is running"))):"ECONNABORTED"===e.code?(console.error("Request timeout"),Promise.reject(Error("Request timeout - server is taking too long to respond"))):(console.error("API Error Details:",{url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(r=e.config)||void 0===r?void 0:r.method,status:null===(s=e.response)||void 0===s?void 0:s.status,message:e.message,code:e.code}),Promise.reject(e))});let n=o},4144:(e,t,r)=>{"use strict";r.d(t,{y:()=>s});var a=r(2649);let s={login:async e=>{let t=await a.A.post("/auth/login",e),{token:r,admin:s}=t.data;return localStorage.setItem("token",r),localStorage.setItem("admin",JSON.stringify(s)),a.A.defaults.headers.common.Authorization="Bearer ".concat(r),t.data},register:async e=>(await a.A.post("/auth/register",e)).data,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("admin"),delete a.A.defaults.headers.common.Authorization},getProfile:async()=>(await a.A.get("/auth/profile")).data,changePassword:async e=>(await a.A.post("/auth/change-password",e)).data,createAdmin:async e=>(await a.A.post("/auth/create",e)).data,getAllAdmins:async()=>{try{return(await a.A.get("/auth/admins")).data}catch(e){throw e.response&&403===e.response.status&&console.error("Yetki hatası: Superadmin rol\xfcne sahip değilsiniz"),e}},getAdminById:async e=>(await a.A.get("/auth/admins/".concat(e))).data,updateAdmin:async(e,t)=>(await a.A.put("/auth/admins/".concat(e),t)).data,deleteAdmin:async e=>{await a.A.delete("/auth/admins/".concat(e))},initializeAuth:()=>{let e=localStorage.getItem("token");e&&(a.A.defaults.headers.common.Authorization="Bearer ".concat(e))},getStoredAdmin:()=>{let e=localStorage.getItem("admin");return e?JSON.parse(e):null},isAdmin:()=>{let e=s.getStoredAdmin();return(null==e?void 0:e.role)==="admin"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2651,8173,5565,8441,1517,7358],()=>t(6002)),_N_E=e.O()}]);