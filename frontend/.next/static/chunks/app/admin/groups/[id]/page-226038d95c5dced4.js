(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9535],{7919:(e,r,i)=>{Promise.resolve().then(i.bind(i,5256))},5353:(e,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return t}});let a=i(2115);function t(e,r){let i=(0,a.useRef)(()=>{}),t=(0,a.useRef)(()=>{});return(0,a.useMemo)(()=>e&&r?a=>{null===a?(i.current(),t.current()):(i.current=s(e,a),t.current=s(r,a))}:e||r,[e,r])}function s(e,r){if("function"!=typeof e)return e.current=r,()=>{e.current=null};{let i=e(r);return"function"==typeof i?i:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},5256:(e,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>j});var a=i(5155),t=i(2115),s=i(6046),l=i(5565),n=i(5055),d=i(3312),c=i(3900),o=i(8986),u=i(6754),h=i(7528),m=i(9749),p=i(2307),v=i(5037),x=i(172);function j(e){var r,i,j,g;let{params:f}=e,y=(0,t.use)(f),b=(0,s.useRouter)(),k="new"===y.id,[w,N]=(0,t.useState)(!0),[C,E]=(0,t.useState)(!1),[q,M]=(0,t.useState)(null),[A,O]=(0,t.useState)(null),[U,R]=(0,t.useState)({name:"",description:"",imageUrl:"",schedule:[{day:"Pazartesi",startTime:"09:00",endTime:"10:30"}],trainer:{name:"",qualification:""},players:[],isActive:!0});(0,t.useEffect)(()=>{if(!y.id){b.replace("/admin/groups");return}(async()=>{if(k){N(!1);return}try{let e=await n.H.getById(y.id),r={...e,players:e.players||[],imageUrl:e.imageUrl||""};R(r),M(null)}catch(e){M("Grup bilgileri y\xfcklenirken bir hata oluştu"),console.error("Error fetching group:",e),v.oR.error("Grup bilgileri y\xfcklenirken bir hata oluştu"),b.push("/admin/groups")}finally{N(!1)}})()},[k,y.id,b]);let J=(e,r)=>{if(e.includes(".")){let[i,a]=e.split(".");R(e=>{let t=e[i]||{};return{...e,[i]:{...t,[a]:r}}})}else R(i=>({...i,[e]:r}))},T=(e,r,i)=>{R(a=>{var t;return{...a,schedule:null===(t=a.schedule)||void 0===t?void 0:t.map((a,t)=>t===e?{...a,[r]:i}:a)}})},_=e=>{R(r=>{var i;return{...r,schedule:null===(i=r.schedule)||void 0===i?void 0:i.filter((r,i)=>i!==e)}})},z=e=>{R(r=>Object.assign({},r,{players:r.players.filter((r,i)=>i!==e)}))},F=(e,r,i)=>{R(a=>Object.assign({},a,{players:a.players.map((a,t)=>t===e?Object.assign({},a,{[r]:i}):a)}))},P=async e=>{e.preventDefault(),E(!0),M(null);try{var r,i,a,t,s;if(!U.name)throw Error("Grup adı zorunludur");if(!U.description)throw Error("A\xe7ıklama zorunludur");if(!(null===(r=U.trainer)||void 0===r?void 0:r.name))throw Error("Eğitmen adı zorunludur");if(!(null===(i=U.trainer)||void 0===i?void 0:i.qualification))throw Error("Eğitmen yeterliliği zorunludur");let e={name:U.name,description:U.description,imageUrl:U.imageUrl,schedule:U.schedule||[],trainer:{name:(null===(a=U.trainer)||void 0===a?void 0:a.name)||"",qualification:(null===(t=U.trainer)||void 0===t?void 0:t.qualification)||""},players:U.players||[],isActive:null===(s=U.isActive)||void 0===s||s,type:"Alt Yapı"};k?(await n.H.create(e,A||void 0),v.oR.success("Grup başarıyla oluşturuldu")):(await n.H.update(y.id,e,A||void 0),v.oR.success("Grup başarıyla g\xfcncellendi")),b.push("/admin/groups")}catch(r){let e="Grup kaydedilirken bir hata oluştu";r instanceof Error&&(e=r.message),M(e),console.error("Error saving group:",r),v.oR.error(e),E(!1)}};return w?(0,a.jsx)("div",{className:"flex h-[50vh] items-center justify-center",children:(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):q?(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-700",children:q})}):(0,a.jsx)("div",{className:"container mx-auto py-8 px-4",children:(0,a.jsxs)(m.Zp,{children:[(0,a.jsx)(m.aR,{children:(0,a.jsx)(m.ZB,{children:k?"Yeni Grup Ekle":"Grubu D\xfczenle"})}),(0,a.jsx)(m.Wu,{children:(0,a.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"name",children:"Grup Adı"}),(0,a.jsx)(c.p,{id:"name",value:U.name,onChange:e=>J("name",e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"description",children:"A\xe7ıklama"}),(0,a.jsx)(u.T,{id:"description",value:U.description,onChange:e=>J("description",e.target.value),required:!0,className:"min-h-[100px]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"image",children:"Takım Resmi"}),(0,a.jsx)(c.p,{id:"image",type:"file",accept:"image/*",onChange:e=>{var r;let i=null===(r=e.target.files)||void 0===r?void 0:r[0];i&&(O(i),R(e=>({...e,imageUrl:URL.createObjectURL(i)})))},className:"mt-1"}),U.imageUrl&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(l.default,{src:"".concat(U.imageUrl).startsWith("blob:")||"".concat(U.imageUrl).startsWith("data:")||"".concat(U.imageUrl).startsWith("http")?"".concat(U.imageUrl):"".concat(x.C).concat(U.imageUrl),alt:"Takım Resmi",width:200,height:200,className:"rounded-lg object-cover"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{children:"Antrenman Programı"}),(0,a.jsxs)("div",{className:"space-y-2",children:[null===(r=U.schedule)||void 0===r?void 0:r.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(h.l6,{value:e.day,onValueChange:e=>T(r,"day",e),children:[(0,a.jsx)(h.bq,{className:"w-[180px]",children:(0,a.jsx)(h.yv,{placeholder:"G\xfcn se\xe7in"})}),(0,a.jsx)(h.gC,{children:["Pazartesi","Salı","\xc7arşamba","Perşembe","Cuma","Cumartesi","Pazar"].map(e=>(0,a.jsx)(h.eb,{value:e,children:e},"day-".concat(e)))})]}),(0,a.jsx)(c.p,{type:"time",value:e.startTime,onChange:e=>T(r,"startTime",e.target.value),className:"w-[150px]"}),(0,a.jsx)(c.p,{type:"time",value:e.endTime,onChange:e=>T(r,"endTime",e.target.value),className:"w-[150px]"}),(0,a.jsx)(d.$,{type:"button",variant:"destructive",size:"icon",onClick:()=>_(r),children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M3 6h18"}),(0,a.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,a.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})})]},"schedule-item-".concat(r))),(0,a.jsxs)(d.$,{type:"button",variant:"outline",onClick:()=>{R(e=>({...e,schedule:[...e.schedule||[],{day:"Pazartesi",startTime:"09:00",endTime:"10:30"}]}))},className:"mt-2",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:(0,a.jsx)("path",{d:"M12 5v14M5 12h14"})}),"Program Ekle"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{children:"Oyuncular"}),(0,a.jsxs)("div",{className:"space-y-4",children:[null===(i=U.players)||void 0===i?void 0:i.map((e,r)=>(0,a.jsxs)("div",{className:"p-4 border rounded-lg space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h4",{className:"font-semibold",children:["Oyuncu ",r+1]}),(0,a.jsx)(d.$,{type:"button",variant:"destructive",size:"icon",onClick:()=>z(r),children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M3 6h18"}),(0,a.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"player-".concat(r,"-firstName"),children:"Ad"}),(0,a.jsx)(c.p,{id:"player-".concat(r,"-firstName"),value:e.firstName,onChange:e=>F(r,"firstName",e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"player-".concat(r,"-lastName"),children:"Soyad"}),(0,a.jsx)(c.p,{id:"player-".concat(r,"-lastName"),value:e.lastName,onChange:e=>F(r,"lastName",e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"player-".concat(r,"-birthDate"),children:"Doğum Tarihi"}),(0,a.jsx)(c.p,{id:"player-".concat(r,"-birthDate"),type:"date",value:e.birthDate,onChange:e=>F(r,"birthDate",e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"player-".concat(r,"-position"),children:"Mevki"}),(0,a.jsxs)(h.l6,{value:e.position,onValueChange:e=>F(r,"position",e),children:[(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{placeholder:"Mevki se\xe7in"})}),(0,a.jsx)(h.gC,{children:["Kaleci","Defans","Orta Saha","Forvet"].map(e=>(0,a.jsx)(h.eb,{value:e,children:e},e))})]})]})]})]},"player-".concat(r))),(0,a.jsxs)(d.$,{type:"button",variant:"outline",onClick:()=>{R(e=>Object.assign({},e,{players:[...e.players||[],{firstName:"",lastName:"",birthDate:"",position:""}]}))},className:"w-full",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:(0,a.jsx)("path",{d:"M12 5v14M5 12h14"})}),"Oyuncu Ekle"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"trainer.name",children:"Eğitmen Adı"}),(0,a.jsx)(c.p,{id:"trainer.name",value:null===(j=U.trainer)||void 0===j?void 0:j.name,onChange:e=>J("trainer.name",e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"trainer.qualification",children:"Eğitmen Yeterliliği"}),(0,a.jsx)(c.p,{id:"trainer.qualification",value:null===(g=U.trainer)||void 0===g?void 0:g.qualification,onChange:e=>J("trainer.qualification",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.S,{id:"isActive",checked:U.isActive,onCheckedChange:e=>R(r=>({...r,isActive:e}))}),(0,a.jsx)(o.J,{htmlFor:"isActive",className:"font-normal",children:"Aktif"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>b.push("/admin/groups"),children:"İptal"}),(0,a.jsx)(d.$,{type:"submit",disabled:C,children:C?"Kaydediliyor...":"Kaydet"})]})]})})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[2651,5565,1181,5037,4095,3377,8441,1517,7358],()=>r(7919)),_N_E=e.O()}]);