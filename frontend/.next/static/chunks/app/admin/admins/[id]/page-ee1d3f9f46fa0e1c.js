(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9047],{9783:(e,t,r)=>{Promise.resolve().then(r.bind(r,7881))},7881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Y});var a=r(5155),s=r(2115),i=r(6046),n=r(4144),l=r(5037),o=r(9749),d=r(3312),c=r(3900),u=r(8986),m=r(7528),p=r(3610),h=r(8068),f=r(8166),x=r(1488),g=r(858),v=r(7510),b=r(3360),y="Switch",[w,j]=(0,f.A)(y),[N,k]=w(y),A=s.forwardRef((e,t)=>{let{__scopeSwitch:r,name:i,checked:n,defaultChecked:l,required:o,disabled:d,value:c="on",onCheckedChange:u,form:m,...f}=e,[g,v]=s.useState(null),y=(0,h.s)(t,e=>v(e)),w=s.useRef(!1),j=!g||m||!!g.closest("form"),[k=!1,A]=(0,x.i)({prop:n,defaultProp:l,onChange:u});return(0,a.jsxs)(N,{scope:r,checked:k,disabled:d,children:[(0,a.jsx)(b.sG.button,{type:"button",role:"switch","aria-checked":k,"aria-required":o,"data-state":z(k),"data-disabled":d?"":void 0,disabled:d,value:c,...f,ref:y,onClick:(0,p.m)(e.onClick,e=>{A(e=>!e),j&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),j&&(0,a.jsx)(S,{control:g,bubbles:!w.current,name:i,value:c,checked:k,required:o,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});A.displayName=y;var R="SwitchThumb",C=s.forwardRef((e,t)=>{let{__scopeSwitch:r,...s}=e,i=k(R,r);return(0,a.jsx)(b.sG.span,{"data-state":z(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})});C.displayName=R;var S=e=>{let{control:t,checked:r,bubbles:i=!0,...n}=e,l=s.useRef(null),o=(0,g.Z)(r),d=(0,v.X)(t);return s.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==r&&t){let a=new Event("click",{bubbles:i});t.call(e,r),e.dispatchEvent(a)}},[o,r,i]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function z(e){return e?"checked":"unchecked"}var E=r(1567);let P=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(A,{className:(0,E.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...s,ref:t,children:(0,a.jsx)(C,{className:(0,E.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});P.displayName=A.displayName;var I=r(8173),q=r.n(I);function Y(e){let{params:t}=e,r=(0,i.useRouter)(),[p,h]=(0,s.useState)(!0),[f,x]=(0,s.useState)(!1),[g,v]=(0,s.useState)(null),[b,y]=(0,s.useState)({name:"",email:"",role:"editor",isActive:!0});(0,s.useEffect)(()=>{w()},[t.id]);let w=async()=>{try{let e=await n.y.getAdminById(t.id);v(e),y({name:e.name,email:e.email,role:e.role,isActive:e.isActive})}catch(t){var e;(null==t?void 0:null===(e=t.response)||void 0===e?void 0:e.status)===403?(l.oR.error("Yetki hatası: Y\xf6netici bilgilerini g\xf6r\xfcnt\xfclemek i\xe7in superadmin rol\xfcne sahip olmanız gerekmektedir"),r.push("/admin/admins")):l.oR.error("Y\xf6netici bilgileri y\xfcklenirken bir hata oluştu"),console.error("Error fetching admin:",t)}finally{h(!1)}},j=e=>{let{name:t,value:r}=e.target;y(e=>({...e,[t]:r}))},N=async e=>{e.preventDefault(),x(!0);try{await n.y.updateAdmin(t.id,b),l.oR.success("Y\xf6netici başarıyla g\xfcncellendi"),r.push("/admin/admins")}catch(e){var a,s,i;(null==e?void 0:null===(a=e.response)||void 0===a?void 0:a.status)===403?l.oR.error("Yetki hatası: Y\xf6netici g\xfcncellemek i\xe7in superadmin rol\xfcne sahip olmanız gerekmektedir"):(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)?l.oR.error(e.response.data.message):l.oR.error("Y\xf6netici g\xfcncellenirken bir hata oluştu"),console.error("Error updating admin:",e)}finally{x(!1)}};if(p)return(0,a.jsx)("div",{className:"p-8",children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})});if(!g)return(0,a.jsx)("div",{className:"container mx-auto py-8 px-4",children:(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-lg text-red-600",children:"Y\xf6netici bulunamadı"}),(0,a.jsx)(q(),{href:"/admin/admins",className:"mt-4 inline-block",children:(0,a.jsx)(d.$,{variant:"outline",children:"Geri D\xf6n"})})]})})})});let k=n.y.getStoredAdmin(),A=(null==k?void 0:k.id)===g.id;return(0,a.jsx)("div",{className:"container mx-auto py-8 px-4",children:(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(o.ZB,{children:"Y\xf6netici D\xfczenle"}),(0,a.jsx)(q(),{href:"/admin/admins",children:(0,a.jsx)(d.$,{variant:"outline",children:"Geri D\xf6n"})})]}),(0,a.jsxs)(o.Wu,{children:[A&&(0,a.jsx)("div",{className:"mb-6 bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-yellow-700",children:"Kendi hesabınızı d\xfczenliyorsunuz. Rol değişikliği ve hesap durumu değişikliği yapılamaz."})})]})}),(0,a.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{htmlFor:"name",children:"Ad Soyad"}),(0,a.jsx)(c.p,{id:"name",name:"name",value:b.name,onChange:j,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{htmlFor:"email",children:"E-posta"}),(0,a.jsx)(c.p,{id:"email",name:"email",type:"email",value:b.email,onChange:j,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{htmlFor:"role",children:"Rol"}),(0,a.jsxs)(m.l6,{value:b.role,onValueChange:e=>{y(t=>({...t,role:e}))},disabled:A,children:[(0,a.jsx)(m.bq,{children:(0,a.jsx)(m.yv,{placeholder:"Rol se\xe7in"})}),(0,a.jsxs)(m.gC,{children:[(0,a.jsx)(m.eb,{value:"superadmin",children:"S\xfcper Admin"}),(0,a.jsx)(m.eb,{value:"admin",children:"Y\xf6netici"}),(0,a.jsx)(m.eb,{value:"editor",children:"Edit\xf6r"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{htmlFor:"isActive",className:"block mb-2",children:"Durum"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(P,{id:"isActive",checked:b.isActive,onCheckedChange:e=>{y(t=>({...t,isActive:e}))},disabled:A}),(0,a.jsx)(u.J,{htmlFor:"isActive",children:b.isActive?"Aktif":"Pasif"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(d.$,{type:"submit",disabled:f,children:f?"Kaydediliyor...":"Kaydet"})})]})]})]})})}},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var a=r(5155),s=r(2115),i=r(2317),n=r(1027),l=r(1567);let o=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:d=!1,...c}=e,u=d?i.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:s,size:n,className:r})),ref:t,...c})});d.displayName="Button"},9749:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>d,ZB:()=>o,Zp:()=>n,aR:()=>l,wL:()=>c});var a=r(5155),s=r(2115),i=r(1567);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});n.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})});c.displayName="CardFooter"},3900:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var a=r(5155),s=r(2115),i=r(1567);let n=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});n.displayName="Input"},8986:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var a=r(5155),s=r(2115),i=r(6195),n=r(1027),l=r(1567);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.b,{ref:t,className:(0,l.cn)(o(),r),...s})});d.displayName=i.b.displayName},7528:(e,t,r)=>{"use strict";r.d(t,{bq:()=>u,eb:()=>p,gC:()=>m,l6:()=>d,yv:()=>c});var a=r(5155),s=r(2115),i=r(2116),n=r(2645),l=r(7193),o=r(1567);let d=i.bL;i.YJ;let c=i.WT,u=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(i.l9,{ref:t,className:(0,o.cn)("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),...l,children:[s,(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})]})});u.displayName=i.l9.displayName;let m=s.forwardRef((e,t)=>{let{className:r,children:s,position:n="popper",...l}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsx)(i.UC,{ref:t,className:(0,o.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...l,children:(0,a.jsx)(i.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})});m.displayName=i.UC.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.JU,{ref:t,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",r),...s})}).displayName=i.JU.displayName;let p=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(i.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})}),(0,a.jsx)(i.p4,{children:s})]})});p.displayName=i.q7.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=i.wv.displayName},172:(e,t,r)=>{"use strict";r.d(t,{C:()=>s,H:()=>a});let a="http://localhost:5001/api",s="http://localhost:5001"},1567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(3463),s=r(9795);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},2649:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2651),s=r(172);let i=a.A.create({baseURL:s.H,timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>(console.error("Request interceptor error:",e),Promise.reject(e))),i.interceptors.response.use(e=>(console.log("API Success:",e.config.url,e.status),e),e=>{var t,r,s;return a.A.isCancel(e)?(console.log("Request cancelled:",e.message),Promise.reject(Error("Request was cancelled"))):"ERR_NETWORK"===e.code?(console.error("Network error - backend server may be down"),Promise.reject(Error("Network error - please check if the server is running"))):"ECONNABORTED"===e.code?(console.error("Request timeout"),Promise.reject(Error("Request timeout - server is taking too long to respond"))):(console.error("API Error Details:",{url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(r=e.config)||void 0===r?void 0:r.method,status:null===(s=e.response)||void 0===s?void 0:s.status,message:e.message,code:e.code}),Promise.reject(e))});let n=i},4144:(e,t,r)=>{"use strict";r.d(t,{y:()=>s});var a=r(2649);let s={login:async e=>{let t=await a.A.post("/auth/login",e),{token:r,admin:s}=t.data;return localStorage.setItem("token",r),localStorage.setItem("admin",JSON.stringify(s)),a.A.defaults.headers.common.Authorization="Bearer ".concat(r),t.data},register:async e=>(await a.A.post("/auth/register",e)).data,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("admin"),delete a.A.defaults.headers.common.Authorization},getProfile:async()=>(await a.A.get("/auth/profile")).data,changePassword:async e=>(await a.A.post("/auth/change-password",e)).data,createAdmin:async e=>(await a.A.post("/auth/create",e)).data,getAllAdmins:async()=>{try{return(await a.A.get("/auth/admins")).data}catch(e){throw e.response&&403===e.response.status&&console.error("Yetki hatası: Superadmin rol\xfcne sahip değilsiniz"),e}},getAdminById:async e=>(await a.A.get("/auth/admins/".concat(e))).data,updateAdmin:async(e,t)=>(await a.A.put("/auth/admins/".concat(e),t)).data,deleteAdmin:async e=>{await a.A.delete("/auth/admins/".concat(e))},initializeAuth:()=>{let e=localStorage.getItem("token");e&&(a.A.defaults.headers.common.Authorization="Bearer ".concat(e))},getStoredAdmin:()=>{let e=localStorage.getItem("admin");return e?JSON.parse(e):null},isAdmin:()=>{let e=s.getStoredAdmin();return(null==e?void 0:e.role)==="admin"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2651,8173,1181,5037,4095,8441,1517,7358],()=>t(9783)),_N_E=e.O()}]);