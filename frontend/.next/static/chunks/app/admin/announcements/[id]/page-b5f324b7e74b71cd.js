(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3801],{33:(e,t,a)=>{Promise.resolve().then(a.bind(a,2474))},2474:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(5155),s=a(2115),i=a(6046),l=a(3601),n=a(5055),d=a(9749),c=a(3900),o=a(8986),u=a(6754),h=a(7528),v=a(3312),x=a(2307),m=a(1027),p=a(1567);let g=(0,m.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),y=s.forwardRef((e,t)=>{let{className:a,variant:s,...i}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,p.cn)(g({variant:s}),a),...i})});y.displayName="Alert",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h5",{ref:t,className:(0,p.cn)("mb-1 font-medium leading-none tracking-tight",a),...s})}).displayName="AlertTitle";let j=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,p.cn)("text-sm [&_p]:leading-relaxed",a),...s})});j.displayName="AlertDescription";let f=(0,a(4057).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);function b(e){var t,a;let{params:m}=e,p=(0,s.use)(m),g=(0,i.useRouter)(),b="new"===p.id,[k,N]=(0,s.useState)(!0),[w,D]=(0,s.useState)(!1),[A,C]=(0,s.useState)(null),[S,F]=(0,s.useState)([]),[J,T]=(0,s.useState)({title:"",content:"",priority:"Normal",startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],targetGroups:[],isActive:!0});(0,s.useEffect)(()=>{(async()=>{try{let e=await n.H.getAll();if(F(e),!b){let e=await l.b.getById(p.id);T(e)}C(null)}catch(e){C("Veriler y\xfcklenirken bir hata oluştu"),console.error("Error fetching data:",e)}finally{N(!1)}})()},[b,p.id]);let E=(e,t)=>{T(a=>({...a,[e]:t}))},G=e=>{T(t=>{var a;return{...t,targetGroups:(null===(a=t.targetGroups)||void 0===a?void 0:a.includes(e))?t.targetGroups.filter(t=>t!==e):[...t.targetGroups||[],e]}})},_=async e=>{e.preventDefault(),D(!0),C(null);try{b?await l.b.create(J):await l.b.update(p.id,J),g.push("/admin/announcements")}catch(e){C("Duyuru kaydedilirken bir hata oluştu"),console.error("Error saving announcement:",e),D(!1)}};return k?(0,r.jsx)("div",{className:"flex items-center justify-center h-[400px]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:b?"Yeni Duyuru Ekle":"Duyuruyu D\xfczenle"})}),(0,r.jsxs)(d.Wu,{children:[A&&(0,r.jsx)(y,{variant:"destructive",className:"mb-6",children:(0,r.jsx)(j,{children:A})}),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"title",children:"Başlık"}),(0,r.jsx)(c.p,{id:"title",value:J.title,onChange:e=>E("title",e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"content",children:"İ\xe7erik"}),(0,r.jsx)(u.T,{id:"content",value:J.content,onChange:e=>E("content",e.target.value),rows:6,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"priority",children:"\xd6ncelik"}),(0,r.jsxs)(h.l6,{value:J.priority,onValueChange:e=>E("priority",e),children:[(0,r.jsx)(h.bq,{children:(0,r.jsx)(h.yv,{placeholder:"\xd6ncelik se\xe7in"})}),(0,r.jsxs)(h.gC,{children:[(0,r.jsx)(h.eb,{value:"D\xfcş\xfck",children:"D\xfcş\xfck"}),(0,r.jsx)(h.eb,{value:"Normal",children:"Normal"}),(0,r.jsx)(h.eb,{value:"Y\xfcksek",children:"Y\xfcksek"}),(0,r.jsx)(h.eb,{value:"Acil",children:"Acil"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"startDate",children:"Başlangı\xe7 Tarihi"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.p,{id:"startDate",type:"date",value:null===(t=J.startDate)||void 0===t?void 0:t.toString().split("T")[0],onChange:e=>E("startDate",e.target.value),required:!0}),(0,r.jsx)(f,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-500"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"endDate",children:"Bitiş Tarihi"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.p,{id:"endDate",type:"date",value:null===(a=J.endDate)||void 0===a?void 0:a.toString().split("T")[0],onChange:e=>E("endDate",e.target.value),required:!0}),(0,r.jsx)(f,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-500"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{children:"Hedef Gruplar"}),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:S.map(e=>{var t;return(0,r.jsxs)("div",{className:"flex items-center space-x-2 rounded-md border p-3 hover:bg-accent",children:[(0,r.jsx)(x.S,{id:"group-".concat(e.id),checked:null===(t=J.targetGroups)||void 0===t?void 0:t.includes(e.id),onCheckedChange:()=>G(e.id)}),(0,r.jsx)(o.J,{htmlFor:"group-".concat(e.id),className:"text-sm font-normal cursor-pointer",children:e.name})]},e.id)})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.S,{id:"isActive",checked:J.isActive,onCheckedChange:e=>E("isActive",e)}),(0,r.jsx)(o.J,{htmlFor:"isActive",className:"font-normal",children:"Aktif"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)(v.$,{type:"button",variant:"outline",onClick:()=>g.push("/admin/announcements"),children:"İptal"}),(0,r.jsx)(v.$,{type:"submit",disabled:w,children:w?"Kaydediliyor...":"Kaydet"})]})]})]})]})}},3601:(e,t,a)=>{"use strict";a.d(t,{b:()=>s});var r=a(2649);let s={getAll:async()=>(await r.A.get("/announcements")).data,getById:async e=>(await r.A.get("/announcements/".concat(e))).data,create:async e=>(await r.A.post("/announcements",e)).data,update:async(e,t)=>(await r.A.put("/announcements/".concat(e),t)).data,delete:async e=>{await r.A.delete("/announcements/".concat(e))}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2651,1181,4095,3377,8441,1517,7358],()=>t(33)),_N_E=e.O()}]);