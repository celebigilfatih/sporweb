(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720,2265],{4110:(e,r,t)=>{Promise.resolve().then(t.bind(t,6749))},6749:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(5155),a=t(2115),n=t(8173),l=t.n(n),o=t(5565),i=t(2265);function c(){let[e,r]=(0,a.useState)([]),[t,n]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(null),m=async()=>{try{let e=await i.newsService.getAll();r(e),d(null)}catch(e){d("Haberler y\xfcklenirken bir hata oluştu"),console.error("Error fetching news:",e)}finally{n(!1)}};(0,a.useEffect)(()=>{m()},[]);let x=async e=>{if(window.confirm("Bu haberi silmek istediğinizden emin misiniz?")){h(e);try{await i.newsService.delete(e),await m()}catch(e){d("Haber silinirken bir hata oluştu"),console.error("Error deleting news:",e)}finally{h(null)}}};return t?(0,s.jsx)("div",{className:"p-8",children:(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Haberler"}),(0,s.jsx)(l(),{href:"/admin/news/new",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Yeni Haber Ekle"})]}),c&&(0,s.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:c}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,s.jsx)("div",{className:"relative h-48",children:(0,s.jsx)(o.default,{src:e.image||"/news-placeholder.svg",alt:e.title,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-semibold rounded-full",children:e.category}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isPublished?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isPublished?"Yayında":"Taslak"})]}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:e.title}),(0,s.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.content}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:e.author}),(0,s.jsx)("span",{className:"mx-2",children:"•"}),(0,s.jsx)("time",{children:new Date(e.publishDate).toLocaleDateString("tr-TR")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(l(),{href:"/admin/news/".concat(e._id),className:"text-blue-600 hover:text-blue-800",children:"D\xfczenle"}),(0,s.jsx)("button",{onClick:()=>x(e._id),disabled:u===e._id,className:"text-red-600 hover:text-red-800 ".concat(u===e._id?"opacity-50 cursor-not-allowed":""),children:u===e._id?"Siliniyor...":"Sil"})]})]})]})]},e._id))}),0===e.length&&(0,s.jsx)("div",{className:"text-center text-gray-500 py-8",children:"Hen\xfcz haber bulunmuyor."})]})}},172:(e,r,t)=>{"use strict";t.d(r,{C:()=>a,H:()=>s});let s="http://localhost:5001/api",a="http://localhost:5001"},2649:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(2651),a=t(172);let n=s.A.create({baseURL:a.H,timeout:1e4,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{{let r=localStorage.getItem("token");r&&(e.headers.Authorization="Bearer ".concat(r))}return e},e=>(console.error("Request interceptor error:",e),Promise.reject(e))),n.interceptors.response.use(e=>(console.log("API Success:",e.config.url,e.status),e),e=>{var r,t,a;return s.A.isCancel(e)?(console.log("Request cancelled:",e.message),Promise.reject(Error("Request was cancelled"))):"ERR_NETWORK"===e.code?(console.error("Network error - backend server may be down"),Promise.reject(Error("Network error - please check if the server is running"))):"ECONNABORTED"===e.code?(console.error("Request timeout"),Promise.reject(Error("Request timeout - server is taking too long to respond"))):(console.error("API Error Details:",{url:null===(r=e.config)||void 0===r?void 0:r.url,method:null===(t=e.config)||void 0===t?void 0:t.method,status:null===(a=e.response)||void 0===a?void 0:a.status,message:e.message,code:e.code}),Promise.reject(e))});let l=n},2265:(e,r,t)=>{"use strict";t.d(r,{newsService:()=>a});var s=t(2649);let a={getAll:async()=>{try{return(await s.A.get("/news")).data}catch(e){if(e&&"object"==typeof e&&"response"in e&&e.response)throw Error("Failed to fetch news: ".concat(e.response.status," ").concat(e.response.statusText));throw Error("Failed to fetch news")}},getById:async e=>{try{return(await s.A.get("/news/".concat(e))).data}catch(e){throw console.error("Error in newsService.getById:",e),e}},create:async e=>{try{return(await s.A.post("/news",e)).data}catch(e){throw console.error("Error in newsService.create:",e),e}},update:async(e,r)=>{try{return(await s.A.put("/news/".concat(e),r)).data}catch(e){throw console.error("Error in newsService.update:",e),e}},delete:async e=>{try{await s.A.delete("/news/".concat(e))}catch(e){throw console.error("Error in newsService.delete:",e),e}}}}},e=>{var r=r=>e(e.s=r);e.O(0,[2651,8173,5565,8441,1517,7358],()=>r(4110)),_N_E=e.O()}]);