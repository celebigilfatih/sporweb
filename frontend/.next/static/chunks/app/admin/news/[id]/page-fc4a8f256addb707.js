(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2265,4010],{6528:(e,t,r)=>{Promise.resolve().then(r.bind(r,4005))},6046:(e,t,r)=>{"use strict";var a=r(6658);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},5353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let a=r(2115);function s(e,t){let r=(0,a.useRef)(()=>{}),s=(0,a.useRef)(()=>{});return(0,a.useMemo)(()=>e&&t?a=>{null===a?(r.current(),s.current()):(r.current=l(e,a),s.current=l(t,a))}:e||t,[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4005:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(5155),s=r(2115),l=r(6046),o=r(5565),n=r(2265);function i(e){var t,r;let{params:i}=e,c=(0,s.use)(i),u=(0,l.useRouter)(),d="new"===c.id,[m,h]=(0,s.useState)({title:"",content:"",image:"",category:"Genel",author:"",isPublished:!0,publishDate:new Date().toISOString(),tags:[]}),[g,b]=(0,s.useState)(!d),[f,x]=(0,s.useState)(!1),[p,v]=(0,s.useState)(null),[y,w]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{try{if(!d){let e=await n.newsService.getById(c.id);h(e)}v(null)}catch(e){v("Haber y\xfcklenirken bir hata oluştu"),console.error("Error fetching news:",e)}finally{b(!1)}})()},[d,c.id]);let j=e=>{let{name:t,value:r}=e.target;h(e=>({...e,[t]:r}))},N=async e=>new Promise((t,r)=>{let a=new FileReader;a.onload=e=>{var a;let s=document.createElement("img");s.onload=()=>{let e=document.createElement("canvas"),a=s.width,l=s.height;a>l&&a>800?(l=800*l/a,a=800):l>800&&(a=800*a/l,l=800),e.width=a,e.height=l;let o=e.getContext("2d");if(!o){r(Error("Failed to get canvas context"));return}o.drawImage(s,0,0,a,l),t(e.toDataURL("image/jpeg",.8))},s.onerror=()=>{r(Error("Failed to load image"))},s.src=null===(a=e.target)||void 0===a?void 0:a.result},a.onerror=()=>{r(Error("Failed to read file"))},a.readAsDataURL(e)}),k=async e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r)try{v(null);let e=await N(r);h(t=>({...t,image:e}))}catch(e){console.error("Error processing image:",e),v("G\xf6rsel y\xfcklenirken bir hata oluştu. L\xfctfen daha k\xfc\xe7\xfck bir g\xf6rsel deneyin.")}},E=e=>{h(t=>{var r;return{...t,tags:null===(r=t.tags)||void 0===r?void 0:r.filter(t=>t!==e)}})},P=async e=>{e.preventDefault(),x(!0),v(null);try{var t;if(!m.title.trim())throw Error("Başlık alanı zorunludur");if(!m.content.trim())throw Error("İ\xe7erik alanı zorunludur");if(!m.author.trim())throw Error("Yazar alanı zorunludur");let e={title:m.title.trim(),content:m.content.trim(),author:m.author.trim(),category:m.category||"Genel",isPublished:null===(t=m.isPublished)||void 0===t||t,publishDate:new Date(m.publishDate||new Date).toISOString(),tags:Array.isArray(m.tags)?m.tags.filter(e=>e.trim()):[],...m.image&&!m.image.includes("news-placeholder.svg")?{image:m.image}:{}};d?await n.newsService.create(e):await n.newsService.update(c.id,e),u.push("/admin/news")}catch(e){e instanceof Error?v(e.message):v("Haber kaydedilirken bir hata oluştu"),console.error("Error saving news:",e),x(!1)}};return g?(0,a.jsx)("div",{className:"p-8",children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,a.jsx)("div",{className:"p-8",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:d?"Yeni Haber Ekle":"Haberi D\xfczenle"}),p&&(0,a.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:p}),(0,a.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Başlık"}),(0,a.jsx)("input",{type:"text",id:"title",name:"title",value:m.title,onChange:j,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"İ\xe7erik"}),(0,a.jsx)("textarea",{id:"content",name:"content",value:m.content,onChange:j,rows:6,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"G\xf6rsel"}),(0,a.jsxs)("div",{className:"mt-1 flex items-center gap-4",children:[m.image?(0,a.jsx)("div",{className:"relative w-32 h-32",children:(0,a.jsx)(o.default,{src:m.image,alt:"Preview",fill:!0,className:"object-cover rounded-lg"})}):(0,a.jsx)("div",{className:"w-32 h-32 bg-gray-100 flex items-center justify-center rounded-lg",children:(0,a.jsx)("span",{className:"text-gray-400",children:"No Image"})}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:k,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Kategori"}),(0,a.jsxs)("select",{id:"category",name:"category",value:m.category,onChange:j,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"Genel",children:"Genel"}),(0,a.jsx)("option",{value:"Turnuva",children:"Turnuva"}),(0,a.jsx)("option",{value:"Eğitim",children:"Eğitim"}),(0,a.jsx)("option",{value:"Başarı",children:"Başarı"}),(0,a.jsx)("option",{value:"Diğer",children:"Diğer"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"author",className:"block text-sm font-medium text-gray-700",children:"Yazar"}),(0,a.jsx)("input",{type:"text",id:"author",name:"author",value:m.author,onChange:j,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700",children:"Etiketler"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("input",{type:"text",value:y,onChange:e=>w(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&y.trim()){var t;e.preventDefault(),(null===(t=m.tags)||void 0===t?void 0:t.includes(y.trim()))||h(e=>({...e,tags:[...e.tags||[],y.trim()]})),w("")}},placeholder:"Enter tuşu ile etiket ekleyin",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:null===(t=m.tags)||void 0===t?void 0:t.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>E(e),className:"text-blue-600 hover:text-blue-800",children:"\xd7"})]},"tag-".concat(e,"-").concat(t)))})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"isPublished",name:"isPublished",checked:m.isPublished,onChange:e=>h(t=>({...t,isPublished:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"isPublished",className:"ml-2 block text-sm text-gray-900",children:"Yayınla"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"publishDate",className:"block text-sm font-medium text-gray-700",children:"Yayın Tarihi"}),(0,a.jsx)("input",{type:"date",id:"publishDate",name:"publishDate",value:null===(r=m.publishDate)||void 0===r?void 0:r.toString().split("T")[0],onChange:j,required:!0,className:"mt-1 block rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>u.push("/admin/news"),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"İptal"}),(0,a.jsx)("button",{type:"submit",disabled:f,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(f?"opacity-50 cursor-not-allowed":""),children:f?"Kaydediliyor...":"Kaydet"})]})]})]})})}},172:(e,t,r)=>{"use strict";r.d(t,{C:()=>s,H:()=>a});let a="http://localhost:5001/api",s="http://localhost:5001"},2649:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(2651),s=r(172);let l=a.A.create({baseURL:s.H,timeout:1e4,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>(console.error("Request interceptor error:",e),Promise.reject(e))),l.interceptors.response.use(e=>(console.log("API Success:",e.config.url,e.status),e),e=>{var t,r,s;return a.A.isCancel(e)?(console.log("Request cancelled:",e.message),Promise.reject(Error("Request was cancelled"))):"ERR_NETWORK"===e.code?(console.error("Network error - backend server may be down"),Promise.reject(Error("Network error - please check if the server is running"))):"ECONNABORTED"===e.code?(console.error("Request timeout"),Promise.reject(Error("Request timeout - server is taking too long to respond"))):(console.error("API Error Details:",{url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(r=e.config)||void 0===r?void 0:r.method,status:null===(s=e.response)||void 0===s?void 0:s.status,message:e.message,code:e.code}),Promise.reject(e))});let o=l},2265:(e,t,r)=>{"use strict";r.d(t,{newsService:()=>s});var a=r(2649);let s={getAll:async()=>{try{return(await a.A.get("/news")).data}catch(e){if(e&&"object"==typeof e&&"response"in e&&e.response)throw Error("Failed to fetch news: ".concat(e.response.status," ").concat(e.response.statusText));throw Error("Failed to fetch news")}},getById:async e=>{try{return(await a.A.get("/news/".concat(e))).data}catch(e){throw console.error("Error in newsService.getById:",e),e}},create:async e=>{try{return(await a.A.post("/news",e)).data}catch(e){throw console.error("Error in newsService.create:",e),e}},update:async(e,t)=>{try{return(await a.A.put("/news/".concat(e),t)).data}catch(e){throw console.error("Error in newsService.update:",e),e}},delete:async e=>{try{await a.A.delete("/news/".concat(e))}catch(e){throw console.error("Error in newsService.delete:",e),e}}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2651,5565,8441,1517,7358],()=>t(6528)),_N_E=e.O()}]);